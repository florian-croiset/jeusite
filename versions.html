<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Echo ‚Äì Historique des versions</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="icon" href="assets/favicon.ico" type="image/x-icon">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/ip-detection.js"></script>
<script type="module" src="js/discord-webhook.js"></script>
<script src="js/discord-tracker.js"></script>    <script type="module" src="js/remote-refresh.js"></script>
<style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
            background: #0a0a0a;
            color: #e0e0e0;
            overflow-x: hidden;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        :root {
            --debut: #00d0c6;
            --fin: #005867;
            --finn: #8735b9;
            --bug: #ff0055;
            --feature: #00ff88;
            --design: #ffaa00;
        }

        /* Header */
        header {
            text-align: center;
            padding: 3rem 1rem 1rem;
            background: rgba(255, 255, 255, 0.02);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }

        header h1 {
            font-size: 3.5rem;
            background: linear-gradient(135deg, var(--debut), var(--fin), var(--finn));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            background-size: 300%;
            animation: headerGradient 6s linear infinite;
        }

        @keyframes headerGradient {
            0% {
                background-position: 0% 50%
            }

            100% {
                background-position: 300% 50%
            }
        }

        /* Controls */
        .controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 2rem auto;
            flex-wrap: wrap;
            max-width: 900px;
            padding: 0 1rem;
        }

        .btn {
            padding: 0.8rem 1.5rem;
            border: 2px solid var(--debut);
            background: rgba(0, 208, 198, 0.1);
            color: var(--debut);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn:hover {
            background: var(--debut);
            color: #0a0a0a;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 208, 198, 0.4);
        }

        .btn.active {
            background: var(--debut);
            color: #0a0a0a;
        }

        /* Filters */
        .filters {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 2rem auto;
            flex-wrap: wrap;
            max-width: 900px;
            padding: 0 1rem;
        }

        .filter-btn {
            padding: 0.6rem 1.2rem;
            border: 2px solid transparent;
            background: rgba(255, 255, 255, 0.05);
            color: #b0b0b0;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
        }

        .filter-btn:hover {
            border-color: var(--debut);
            color: var(--debut);
        }

        .filter-btn.active {
            border-color: var(--debut);
            background: rgba(0, 208, 198, 0.2);
            color: var(--debut);
        }

        .filter-btn.bug {
            border-color: var(--bug);
        }

        .filter-btn.bug.active {
            background: rgba(255, 0, 85, 0.2);
            color: var(--bug);
        }

        .filter-btn.feature {
            border-color: var(--feature);
        }

        .filter-btn.feature.active {
            background: rgba(0, 255, 136, 0.2);
            color: var(--feature);
        }

        .filter-btn.design {
            border-color: var(--design);
        }

        .filter-btn.design.active {
            background: rgba(255, 170, 0, 0.2);
            color: var(--design);
        }

        /* Stats Dashboard */
        .stats-dashboard {
            max-width: 900px;
            margin: 2rem auto;
            padding: 0 1rem;
            display: none;
        }

        .stats-dashboard.active {
            display: block;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
        }

        .stat-card h3 {
            color: var(--debut);
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .stat-card p {
            color: #b0b0b0;
            font-size: 0.9rem;
        }

        .chart-container {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 2rem;
            margin-top: 2rem;
        }

        /* Comparator */
        .comparator {
            max-width: 900px;
            margin: 2rem auto;
            padding: 2rem;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            display: none;
        }

        .comparator.active {
            display: block;
        }

        .compare-selects {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .compare-selects select {
            width: 100%;
            padding: 0.8rem;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--debut);
            border-radius: 8px;
            color: #e0e0e0;
            font-size: 1rem;
        }

        .compare-result {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .compare-column h3 {
            color: var(--debut);
            margin-bottom: 1rem;
        }

        /* Timeline View */
        .timeline-container {
            max-width: 900px;
            margin: 3rem auto;
            padding: 0 1rem;
            position: relative;
            display: none;
        }

        .timeline-container.active {
            display: block;
        }

        .timeline-line {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(180deg, var(--debut), var(--finn));
        }

        .timeline-item {
            display: flex;
            margin-bottom: 3rem;
            position: relative;
        }

        .timeline-item:nth-child(odd) {
            flex-direction: row-reverse;
        }

        .timeline-content {
            width: 45%;
            background: rgba(255, 255, 255, 0.03);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 1.5rem;
            transition: all 0.4s;
        }

        .timeline-content:hover {
            border-color: var(--debut);
            transform: scale(1.02);
            box-shadow: 0 10px 30px rgba(0, 208, 198, 0.3);
        }

        .timeline-dot {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 20px;
            background: var(--debut);
            border-radius: 50%;
            border: 4px solid #0a0a0a;
            z-index: 10;
        }

        .timeline-icon {
            position: absolute;
            left: 50%;
            transform: translate(-50%, -35px);
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--debut), var(--finn));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: #0a0a0a;
            z-index: 11;
        }

        .timeline-content h3 {
            color: var(--debut);
            margin-bottom: 0.5rem;
            font-size: 1.5rem;
        }

        .timeline-content .date {
            color: #808080;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .timeline-content .changes {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .change-badge {
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .change-badge.bug {
            background: rgba(255, 0, 85, 0.2);
            color: var(--bug);
            border: 1px solid var(--bug);
        }

        .change-badge.feature {
            background: rgba(0, 255, 136, 0.2);
            color: var(--feature);
            border: 1px solid var(--feature);
        }

        .change-badge.design {
            background: rgba(255, 170, 0, 0.2);
            color: var(--design);
            border: 1px solid var(--design);
        }

        /* Classic View */
        .classic-container {
            max-width: 900px;
            margin: 3rem auto 6rem;
            padding: 0 1.5rem;
            display: block;
        }

        .classic-container.hidden {
            display: none;
        }

        .version-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
            transition: all 0.4s ease;
            animation: fadeInUp 0.7s ease forwards;
        }

        .version-card.hidden-filter {
            display: none;
        }

        .version-card:hover {
            border-color: var(--debut);
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.3);
        }

        .version-title {
            font-size: 1.8rem;
            background: linear-gradient(135deg, var(--debut), var(--fin), var(--finn));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
        }

        .version-date {
            font-size: 0.9rem;
            color: #808080;
            margin-bottom: 1rem;
        }

        .version-content ul {
            list-style: none;
        }

        .version-content li {
            margin-bottom: 0.5rem;
            color: #b0b0b0;
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
        }

        .version-content li .icon {
            margin-top: 0.2rem;
            flex-shrink: 0;
        }

        .version-content li .icon.bug {
            color: var(--bug);
        }

        .version-content li .icon.feature {
            color: var(--feature);
        }

        .version-content li .icon.design {
            color: var(--design);
        }

        .latest-version {
            box-shadow: 0 0 40px rgba(0, 208, 198, 0.6);
            border: 2px solid var(--debut);
            position: relative;
        }

        .latest-version::after {
            content: "Version actuelle";
            position: absolute;
            top: -1px;
            left: -1px;
            padding: 5px 10px;
            background: var(--debut);
            color: #0a0a0a;
            font-size: 0.75rem;
            font-weight: bold;
            border-radius: 15px 0 15px 0;
            z-index: 10;
            box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.5);
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 2rem;
            background: rgba(0, 0, 0, 0.4);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #808080;
        }

        /* Back Button */
        a.back-btn {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 2px solid rgba(102, 126, 234, 0.3);
            background: rgba(10, 10, 10, 0.8);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            transition: all 0.3s;
            text-decoration: none;
            z-index: 1000;
        }

        a.back-btn i {
            color: var(--debut);
            font-size: 1.4rem;
        }

        a.back-btn:hover {
            transform: scale(1.1);
            border-color: var(--finn);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Mobile */
        @media (max-width: 768px) {
            header h1 {
                font-size: 2.5rem;
            }

            .timeline-line {
                left: 30px;
            }

            .timeline-item {
                flex-direction: row !important;
                padding-left: 70px;
            }

            .timeline-content {
                width: 100%;
            }

            .timeline-dot {
                left: 30px;
            }

            .timeline-icon {
                left: 30px;
            }

            .compare-selects,
            .compare-result {
                grid-template-columns: 1fr;
            }

            .controls,
            .filters {
                padding: 0 0.5rem;
            }

            .btn,
            .filter-btn {
                font-size: 0.85rem;
                padding: 0.6rem 1rem;
            }
        }
    </style>
</head>

<body>
    <header>
        <h1>Historique des Versions</h1>
        <p><i class="fa-solid fa-code-branch"></i> Journal des am√©liorations du site <strong>Echo</strong></p>
    </header>

    <!-- Controls -->
    <div class="controls">
        <button class="btn active" id="btn-classic" onclick="switchView('classic')">
            <i class="fas fa-list"></i> Vue Classique
        </button>
        <button class="btn" id="btn-timeline" onclick="switchView('timeline')">
            <i class="fas fa-stream"></i> Timeline
        </button>
        <button class="btn" id="btn-stats" onclick="switchView('stats')">
            <i class="fas fa-chart-bar"></i> Statistiques
        </button>
        <button class="btn" id="btn-compare" onclick="switchView('compare')">
            <i class="fas fa-code-compare"></i> Comparer
        </button>
    </div>

    <!-- Filters -->
    <div class="filters">
        <button class="filter-btn active" data-filter="all" onclick="filterByType('all')">
            <i class="fas fa-border-all"></i> Tout
        </button>
        <button class="filter-btn bug" data-filter="bug" onclick="filterByType('bug')">
            <i class="fas fa-bug"></i> Bugs
        </button>
        <button class="filter-btn feature" data-filter="feature" onclick="filterByType('feature')">
            <i class="fas fa-star"></i> Features
        </button>
        <button class="filter-btn design" data-filter="design" onclick="filterByType('design')">
            <i class="fas fa-palette"></i> Design
        </button>
    </div>

    <!-- Stats Dashboard -->
    <div class="stats-dashboard" id="stats-dashboard">
        <div class="stats-grid">
            <div class="stat-card">
                <h3 id="stat-total-versions">0</h3>
                <p>Versions publi√©es</p>
            </div>
            <div class="stat-card">
                <h3 id="stat-total-changes">0</h3>
                <p>Changements totaux</p>
            </div>
            <div class="stat-card">
                <h3 id="stat-bugs-fixed">0</h3>
                <p>Bugs corrig√©s</p>
            </div>
            <div class="stat-card">
                <h3 id="stat-features-added">0</h3>
                <p>Features ajout√©es</p>
            </div>
        </div>
        <div class="chart-container">
            <canvas id="versionsChart"></canvas>
        </div>
    </div>

    <!-- Comparator -->
    <div class="comparator" id="comparator">
        <h2 style="color: var(--debut); margin-bottom: 1.5rem; text-align: center;">
            <i class="fas fa-code-compare"></i> Comparer deux versions
        </h2>
        <div class="compare-selects">
            <div>
                <label style="color: #b0b0b0; display: block; margin-bottom: 0.5rem;">Version A</label>
                <select id="compare-version-a"></select>
            </div>
            <div>
                <label style="color: #b0b0b0; display: block; margin-bottom: 0.5rem;">Version B</label>
                <select id="compare-version-b"></select>
            </div>
        </div>
        <button class="btn" onclick="compareVersions()" style="margin: 0 auto; display: flex;">
            <i class="fas fa-exchange-alt"></i> Comparer
        </button>
        <div class="compare-result" id="compare-result"></div>
    </div>

    <!-- Timeline View -->
    <div class="timeline-container" id="timeline-container">
        <div class="timeline-line"></div>
        <div id="timeline-content"></div>
    </div>

    <!-- Classic View -->
    <main class="classic-container" id="classic-container">
        <!-- Les versions seront inject√©es ici -->
    </main>

    <footer>
        <p>&copy; <span id="current-year">2025</span> Echo ‚Äì Historique des versions</p>
    </footer>

    <a href="index.html" class="back-btn" title="Retour au site principal">
        <i class="fa-solid fa-arrow-left"></i>
    </a>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script type="module" src="js/config/supabase.js"></script>
    <script>
        // Donn√©es des versions (√† remplacer par appel DB plus tard)
        const versions = [
            {
                version: "2.3",
                date: "5 janvier 2026",
                changes: [
                    { type: "feature", text: "Lancement de la page Roadmap (version b√™ta) : suivi interactif du d√©veloppement avec syst√®me de vote et d'affichage" },
                    { type: "feature", text: "Refonte de la page Versions : ajout des cat√©gories de modifications, outils de comparaison et nouveaux modes d'affichage" },
                    { type: "feature", text: "Dashboard Admin : int√©gration compl√®te de la gestion de la Roadmap (Ajout, Modification, Suppression)" },
                    { type: "design", text: "Optimisation de l'interface utilisateur pour la navigation entre les diff√©rentes versions et la roadmap" }
                ],
                isLatest: true
            },
            {
                version: "2.2",
                date: "4 janvier 2026",
                changes: [
                    { type: "feature", text: "Lancement du Bot Discord en version b√™ta (suivi des vues, stats, actions et t√©l√©chargements)" },
                    { type: "feature", text: "Modification group√©e du site (version dans le footer) : mises √† jour de l'interface admin et des pages" },
                    { type: "feature", text: "Syst√®me de notifications (en cours de d√©veloppement)" },
                    { type: "design", text: "Optimisations globales de l'affichage des pages" }
                ],
                isLatest: false
            },
            {
                version: "2.1",
                date: "3 janvier 2026",
                changes: [
                    { type: "feature", text: "Ajout d'un compteur de t√©l√©chargement et correction du bouton associ√©" },
                    { type: "feature", text: "Refonte compl√®te de la page de test (test.html) et modifications du panel admin" },
                    { type: "feature", text: "Possibilit√© de d√©sactiver le t√©l√©chargement depuis la section Design (+ ajout de Echo Docs)" },
                    { type: "feature", text: "Cr√©ation de liens sp√©cifiques pour les soutenances" },
                    { type: "feature", text: "Am√©lioration et correction du mode sablier (liens et logique de fonctionnement)" },
                    { type: "design", text: "Mise √† jour visuelle des sections : T√©l√©charger, Gameplay et Lore" },
                    { type: "design", text: "Homog√©n√©isation de l'affichage du compteur sablier ('0' au lieu de '00')" },
                    { type: "bug", text: "Correction de l'ic√¥ne FontAwesome pour les PDF (affichait une ic√¥ne PNG)" },
                    { type: "bug", text: "Corrections g√©n√©rales sur le syst√®me de settings et la stabilit√© du t√©l√©chargement" }
                ],
                isLatest: false
            },
            {
                version: "2.0",
                date: "29 d√©cembre 2025",
                changes: [
                    { type: "feature", text: "Refonte compl√®te du back-end et cr√©ation de la base de donn√©es avec syst√®me de comptes" },
                    { type: "feature", text: "Dashboard Admin : gestion centralis√©e (activation t√©l√©chargement, versions, countdown, infos)" },
                    { type: "feature", text: "Ajout de la page Settings pour la configuration globale" },
                    { type: "feature", text: "Syst√®me d'exports sur la page Design : t√©l√©chargement du ZIP, PDF charte graphique et pack assets" },
                    { type: "feature", text: "Ajout de l'ex√©cutable et des fonctions de t√©l√©chargement associ√©es" },
                    { type: "feature", text: "Int√©gration de Google Tag pour l'analyse d'audience" },
                    { type: "bug", text: "Correction du bug sur le bouton musique et r√©solution des probl√®mes d'import (design.js)" },
                    { type: "bug", text: "Correction des erreurs et bugs sur le splash screen" },
                    { type: "design", text: "Am√©lioration visuelle du splash screen et optimisation de la structure index.html" },
                    { type: "feature", text: "Pr√©paration des formulaires reli√©s √† la base de donn√©es (non impl√©ment√©s)" }
                ],
                isLatest: false
            },
            {
                version: "1.5",
                date: "16 d√©cembre 2025",
                changes: [
                    { type: "feature", text: "Am√©lioration du menu burger : fermeture au scroll, touche √âchap, clic en dehors" },
                    { type: "feature", text: "Ajout de la page Design avec logos, couleurs, sprites, emojis‚Ä¶ (page non termin√©e)" },
                    { type: "feature", text: "Ajout de la page Liens pour un acc√®s facile aux ressources externes" },
                    { type: "bug", text: "Correction de bugs mineurs pour am√©liorer la stabilit√©" },
                    { type: "design", text: "Ajout de la version mobile sur la page Versions du site web" }
                ],
                isLatest: false
            },
            {
                version: "1.4",
                date: "13 d√©cembre 2025",
                changes: [
                    { type: "feature", text: "Ajout du favicon ü™∂" },
                    { type: "feature", text: "Bouton „ÄåT√©l√©charger„Äç redirige vers le fichier ex√©cutable" },
                    { type: "design", text: "Ic√¥ne fus√©e üöÄ anim√©e dans le titre du compte √† rebours" },
                    { type: "feature", text: "Nouveau bouton sablier üïí pour acc√©l√©rer le compte √† rebours (de 10 s en mode test)" },
                    { type: "feature", text: "D√©blocage automatique du t√©l√©chargement √† la fin du compte √† rebours" },
                    { type: "feature", text: "Raccourci clavier P pour lecture / pause musique üéµ" },
                    { type: "feature", text: "Modale d‚Äôacc√®s secret am√©lior√©e : coller üìã, effacer ‚ùå, Entr√©e = valider / √âchap = fermer" },
                    { type: "feature", text: "Nouveau bouton flottant de partage üîó (API nat + QR Code + copie du lien)" },
                    { type: "feature", text: "Section „ÄåLore„Äç compl√©t√©e : pr√©sentation + 4 actes narratifs (Kaelen : L‚ÄôOmbre du Soleil)" },
                    { type: "feature", text: "Fermeture auto du menu burger apr√®s clic sur un lien" },
                    { type: "design", text: "Am√©liorations visuelles et interface plus fluide sur mobile et desktop" }
                ],
                isLatest: false
            },
            {
                version: "1.3",
                date: "9 d√©cembre 2025",
                changes: [
                    { type: "feature", text: "Menu burger pour mobile üì±" },
                    { type: "design", text: "Feuille de style mobile (mobile.css) ajout√©e" },
                    { type: "design", text: "Boutons ¬´ T√©l√©charger ¬ª adapt√©s au mobile (non cliquables + texte sp√©cifique)" },
                    { type: "design", text: "Texte et ic√¥nes du bouton T√©l√©charger am√©lior√©s (selon disponibilit√©)" },
                    { type: "feature", text: "Code JS du bouton refactoris√© et plus lisible" },
                    { type: "feature", text: "D√©tection auto des appareils (window.innerWidth <= 768px)" },
                    { type: "feature", text: "R√©‚Äëadapatation au redimensionnement de la fen√™tre" },
                    { type: "design", text: "Lien ¬´ Team Nightberry ¬ª plus grand dans l‚Äôen‚Äët√™te" },
                    { type: "design", text: "Structure de navigation simplifi√©e et plus claire" },
                    { type: "bug", text: "Mise √† jour g√©n√©rale du script pour plus de stabilit√© et compatibilit√©" }
                ],
                isLatest: false
            },
            {
                version: "1.2",
                date: "5 d√©cembre 2025",
                changes: [
                    { type: "design", text: "Logo anim√© (gradient + effet holographique)" },
                    { type: "design", text: "Barre de navigation adoucie au scroll" },
                    { type: "design", text: "Particules et filaments d‚Äô√©nergie dans le fond" },
                    { type: "design", text: "Soulignement liquide des liens" },
                    { type: "feature", text: "Bouton musique üéµ / ‚è∏Ô∏è flottant + lecture automatique apr√®s interaction" },
                    { type: "design", text: "Texte de version anim√© dans le footer" },
                    { type: "feature", text: "Fen√™tre modale d‚Äôacc√®s secret (stylis√©e)" }
                ],
                isLatest: false
            },
            {
                version: "1.1",
                date: "2 d√©cembre 2025",
                changes: [
                    { type: "feature", text: "Ajout du syst√®me de compte √† rebours (Hero)" },
                    { type: "feature", text: "Ajout du bouton „ÄåRemonter en haut„Äç flottant" },
                    { type: "design", text: "Optimisations de scroll et animations des sections" }
                ],
                isLatest: false
            },
            {
                version: "1.0",
                date: "1er d√©cembre 2025",
                changes: [
                    { type: "feature", text: "Premi√®re mise en ligne du site Echo" },
                    { type: "feature", text: "Section Team, Gameplay, Lore, T√©l√©chargement" },
                    { type: "design", text: "Design principal dark / n√©on cyan‚Äìviolet" }
                ],
                isLatest: false
            }
        ];

        let currentFilter = 'all';
        let currentView = 'classic';

        // Initialisation
        document.addEventListener('DOMContentLoaded', () => {
            renderClassicView();
            renderTimeline();
            populateCompareSelects();
            calculateStats();
            updateYear();
        });

        function updateYear() {
            document.getElementById('current-year').textContent = new Date().getFullYear();
        }

        // Switch View
        function switchView(view) {
            currentView = view;

            // Update buttons
            document.querySelectorAll('.controls .btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`btn-${view}`).classList.add('active');

            // Hide all views
            document.getElementById('classic-container').classList.toggle('hidden', view !== 'classic');
            document.getElementById('timeline-container').classList.toggle('active', view === 'timeline');
            document.getElementById('stats-dashboard').classList.toggle('active', view === 'stats');
            document.getElementById('comparator').classList.toggle('active', view === 'compare');
        }

        // Filter by type
        function filterByType(type) {
            currentFilter = type;

            // Update filter buttons
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`[data-filter="${type}"]`).classList.add('active');

            // Apply filter
            if (currentView === 'classic') {
                applyFilterClassic();
            } else if (currentView === 'timeline') {
                applyFilterTimeline();
            }
        }

        // Render Classic View
        function renderClassicView() {
            const container = document.getElementById('classic-container');
            container.innerHTML = versions.map(v => `
                <div class="version-card ${v.isLatest ? 'latest-version' : ''}" data-version="${v.version}">
                    <div class="version-title">Version ${v.version}</div>
                    <div class="version-date">${v.date}</div>
                    <div class="version-content">
                        <ul>
                            ${v.changes.map(c => `
                                <li data-type="${c.type}">
                                    <span class="icon ${c.type}">
                                        ${c.type === 'bug' ? '<i class="fas fa-bug"></i>' :
                    c.type === 'feature' ? '<i class="fas fa-star"></i>' :
                        '<i class="fas fa-palette"></i>'}
                                    </span>
                                    <span>${c.text}</span>
                                </li>
                            `).join('')}
                        </ul>
                    </div>
                </div>
            `).join('');
        }

        function applyFilterClassic() {
            document.querySelectorAll('.version-card').forEach(card => {
                if (currentFilter === 'all') {
                    card.classList.remove('hidden-filter');
                } else {
                    const hasType = Array.from(card.querySelectorAll('li')).some(li =>
                        li.dataset.type === currentFilter
                    );
                    card.classList.toggle('hidden-filter', !hasType);
                }
            });
        }

        // Render Timeline
        function renderTimeline() {
            const container = document.getElementById('timeline-content');
            const icons = {
                bug: 'fa-bug',
                feature: 'fa-star',
                design: 'fa-palette'
            };

            container.innerHTML = versions.map((v, index) => {
                const mainType = getMostFrequentType(v.changes);
                return `
                    <div class="timeline-item" data-version="${v.version}">
                        <div class="timeline-content">
                            <h3>Version ${v.version}</h3>
                            <div class="date">${v.date}</div>
                            <ul style="list-style: none; padding: 0;">
                                ${v.changes.map(c => `
                                    <li data-type="${c.type}" style="margin-bottom: 0.5rem; color: #b0b0b0;">
                                        ‚Ä¢ ${c.text}
                                    </li>
                                `).join('')}
                            </ul>
                            <div class="changes">
                                ${getChangesSummary(v.changes)}
                            </div>
                        </div>
                        <div class="timeline-dot"></div>
                        <div class="timeline-icon">
                            <i class="fas ${icons[mainType]}"></i>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function applyFilterTimeline() {
            document.querySelectorAll('.timeline-item').forEach(item => {
                if (currentFilter === 'all') {
                    item.style.display = 'flex';
                } else {
                    const hasType = Array.from(item.querySelectorAll('li')).some(li =>
                        li.dataset.type === currentFilter
                    );
                    item.style.display = hasType ? 'flex' : 'none';
                }
            });
        }

        function getMostFrequentType(changes) {
            const counts = { bug: 0, feature: 0, design: 0 };
            changes.forEach(c => counts[c.type]++);
            return Object.keys(counts).reduce((a, b) => counts[a] > counts[b] ? a : b);
        }

        function getChangesSummary(changes) {
            const counts = { bug: 0, feature: 0, design: 0 };
            changes.forEach(c => counts[c.type]++);

            return `
                ${counts.bug > 0 ? `<span class="change-badge bug"><i class="fas fa-bug"></i> ${counts.bug} Bugs</span>` : ''}
                ${counts.feature > 0 ? `<span class="change-badge feature"><i class="fas fa-star"></i> ${counts.feature} Features</span>` : ''}
                ${counts.design > 0 ? `<span class="change-badge design"><i class="fas fa-palette"></i> ${counts.design} Design</span>` : ''}
            `;
        }

        // Stats
        function calculateStats() {
            const totalVersions = versions.length;
            const allChanges = versions.flatMap(v => v.changes);
            const totalChanges = allChanges.length;
            const bugsFixed = allChanges.filter(c => c.type === 'bug').length;
            const featuresAdded = allChanges.filter(c => c.type === 'feature').length;

            document.getElementById('stat-total-versions').textContent = totalVersions;
            document.getElementById('stat-total-changes').textContent = totalChanges;
            document.getElementById('stat-bugs-fixed').textContent = bugsFixed;
            document.getElementById('stat-features-added').textContent = featuresAdded;

            renderChart();
        }

        function renderChart() {
            const ctx = document.getElementById('versionsChart').getContext('2d');
            const chartData = versions.reverse().map(v => {
                const changes = { bug: 0, feature: 0, design: 0 };
                v.changes.forEach(c => changes[c.type]++);
                return changes;
            });

            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: versions.map(v => `v${v.version}`),
                    datasets: [
                        {
                            label: 'Bugs',
                            data: chartData.map(d => d.bug),
                            backgroundColor: 'rgba(255, 0, 85, 0.6)',
                            borderColor: '#ff0055',
                            borderWidth: 2
                        },
                        {
                            label: 'Features',
                            data: chartData.map(d => d.feature),
                            backgroundColor: 'rgba(0, 255, 136, 0.6)',
                            borderColor: '#00ff88',
                            borderWidth: 2
                        },
                        {
                            label: 'Design',
                            data: chartData.map(d => d.design),
                            backgroundColor: 'rgba(255, 170, 0, 0.6)',
                            borderColor: '#ffaa00',
                            borderWidth: 2
                        }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            labels: { color: '#e0e0e0' }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: { color: '#e0e0e0' },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' }
                        },
                        x: {
                            ticks: { color: '#e0e0e0' },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' }
                        }
                    }
                }
            });

            versions.reverse(); // Restore order
        }

        // Comparator
        function populateCompareSelects() {
            const selectA = document.getElementById('compare-version-a');
            const selectB = document.getElementById('compare-version-b');

            const options = versions.map(v =>
                `<option value="${v.version}">Version ${v.version} (${v.date})</option>`
            ).join('');

            selectA.innerHTML = options;
            selectB.innerHTML = options;
            selectB.selectedIndex = 1;
        }

        function compareVersions() {
            const versionA = versions.find(v => v.version === document.getElementById('compare-version-a').value);
            const versionB = versions.find(v => v.version === document.getElementById('compare-version-b').value);

            if (!versionA || !versionB) return;

            const result = document.getElementById('compare-result');
            result.innerHTML = `
                <div class="compare-column">
                    <h3>Version ${versionA.version}</h3>
                    <p style="color: #808080; margin-bottom: 1rem;">${versionA.date}</p>
                    <ul style="list-style: none; padding: 0;">
                        ${versionA.changes.map(c => `
                            <li style="margin-bottom: 0.5rem; color: #b0b0b0;">
                                <span class="icon ${c.type}">
                                    ${c.type === 'bug' ? '<i class="fas fa-bug"></i>' :
                    c.type === 'feature' ? '<i class="fas fa-star"></i>' :
                        '<i class="fas fa-palette"></i>'}
                                </span>
                                ${c.text}
                            </li>
                        `).join('')}
                    </ul>
                    <div style="margin-top: 1rem;">
                        ${getChangesSummary(versionA.changes)}
                    </div>
                </div>
                <div class="compare-column">
                    <h3>Version ${versionB.version}</h3>
                    <p style="color: #808080; margin-bottom: 1rem;">${versionB.date}</p>
                    <ul style="list-style: none; padding: 0;">
                        ${versionB.changes.map(c => `
                            <li style="margin-bottom: 0.5rem; color: #b0b0b0;">
                                <span class="icon ${c.type}">
                                    ${c.type === 'bug' ? '<i class="fas fa-bug"></i>' :
                                c.type === 'feature' ? '<i class="fas fa-star"></i>' :
                                    '<i class="fas fa-palette"></i>'}
                                </span>
                                ${c.text}
                            </li>
                        `).join('')}
                    </ul>
                    <div style="margin-top: 1rem;">
                        ${getChangesSummary(versionB.changes)}
                    </div>
                </div>
            `;
        }
    </script>
</body>

</html>