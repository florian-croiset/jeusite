<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feedback - Echo</title>

    <link rel="stylesheet" href="css/feedback.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
        media="print" onload="this.media='all'">
    <link rel="icon" href="assets/favicon.ico" type="image/x-icon">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script type="module" src="js/config/supabase.js"></script>
    <script type="module" src="js/database.js"></script>
    <script src="js/ip-detection.js"></script>
    <script type="module" src="js/discord-webhook.js"></script>
    <script src="js/discord-tracker.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const cursor = document.getElementById('customCursor');

            if (cursor) {
                document.addEventListener('mousemove', (e) => {
                    cursor.style.left = e.clientX + 'px';
                    cursor.style.top = e.clientY + 'px';
                });
                const interactiveSelector = 'a, button, input, textarea, .rating-stars, select, .star';
                function attachHoverEvents() {
                    const interactiveElements = document.querySelectorAll(interactiveSelector);
                    interactiveElements.forEach(el => {
                        el.addEventListener('mouseenter', () => cursor.classList.add('hover'));
                        el.addEventListener('mouseleave', () => cursor.classList.remove('hover'));
                    });
                }
                attachHoverEvents();
                document.getElementById('feedback-container')?.addEventListener('mouseover', attachHoverEvents, { once: true });
                document.addEventListener('mouseleave', () => cursor.style.opacity = '0');
                document.addEventListener('mouseenter', () => cursor.style.opacity = '1');
            }
        });

        async function loadSiteVersionFooter() {
    try {
        // Attendre que EchoDB soit disponible
        if (!window.EchoDB) {
            await waitForEchoDB();
        }
        
        const { data, error } = await window.EchoDB.supabase
            .from('site_settings')
            .select('setting_value')
            .eq('setting_key', 'site_version')
            .single();
        
        if (error) throw error;
        
        const versionElement = document.getElementById('site-version-footer');
        if (versionElement && data) {
            versionElement.textContent = `Version ${data.setting_value}`;
        }
    } catch (error) {
        console.error('Erreur chargement version footer:', error);
        // Garder la version par défaut en cas d'erreur
    }
}

// Mettre à jour l'année automatiquement
function updateFooterYear() {
    const yearElement = document.getElementById('current-year');
    if (yearElement) {
        const currentYear = new Date().getFullYear();
        yearElement.textContent = currentYear;
    }
}

// Initialiser au chargement de la page
document.addEventListener('DOMContentLoaded', () => {
    updateFooterYear();
    loadSiteVersionFooter();
});
    </script>
    <script src="js/remote-refresh.js"></script>
    <script src="js/notifications.js"></script>
</head>

<body>
    <div class="custom-cursor" id="customCursor"></div>
    <section class="feedback-hero">
        <h1><i class="fa-solid fa-comment-dots"></i> Votre Avis Compte</h1>
        <p>Aidez-nous à améliorer Echo en partageant votre expérience de jeu</p>
    </section>
    <div id="feedback-container" class="feedback-container feedback-card"></div>
    <footer>
        <p>
            &copy; <span id="current-year">2025</span> <a href="https://florian-croiset.github.io/jeusite/"
                style="color: var(--debut)" target="_blank" rel="noopener noreferrer">Echo</a>. Tous droits réservés •
            <span class="version-text" id="site-version-footer">Version 2.0</span>
        </p>
    </footer>
</body>

</html>